<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Summer Time Tracker</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@400;700&display=swap" rel="stylesheet">
  <style>
    body {
      font-family: 'Roboto', Arial, sans-serif;
      background: linear-gradient(120deg, #f6d365 0%, #fda085 100%);
      min-height: 100vh;
      margin: 0;
      padding: 0;
      display: flex;
      flex-direction: column;
      align-items: center;
    }
    h1 {
      margin-top: 32px;
      color: #333;
      font-size: 2rem;
      letter-spacing: 1px;
      text-shadow: 0 2px 8px rgba(0,0,0,0.08);
      text-align: center;
    }
    form {
      background: #fff;
      padding: 20px 5vw 16px 5vw;
      border-radius: 18px;
      box-shadow: 0 4px 24px rgba(0,0,0,0.10);
      margin-top: 24px;
      margin-bottom: 24px;
      min-width: unset;
      max-width: 98vw;
      width: 100%;
      display: flex;
      flex-direction: column;
      gap: 14px;
      box-sizing: border-box;
    }
    label {
      font-weight: 500;
      color: #444;
      margin-bottom: 4px;
      display: flex;
      flex-direction: column;
      gap: 2px;
      font-size: 1rem;
    }
    input[type="date"],
    input[type="number"],
    select,
    textarea {
      padding: 10px 12px;
      border: 1px solid #ddd;
      border-radius: 6px;
      font-size: 1.05rem;
      background: #f9f9f9;
      transition: border 0.2s;
      width: 100%;
      box-sizing: border-box;
    }
    textarea {
      resize: vertical;
      min-height: 60px;
      max-height: 200px;
    }
    input[type="date"]:focus,
    input[type="number"]:focus,
    select:focus,
    textarea:focus {
      border: 1.5px solid #fda085;
      outline: none;
      background: #fffbe9;
    }
    button[type="submit"] {
      margin-top: 8px;
      background: linear-gradient(90deg, #f6d365 0%, #fda085 100%);
      color: #fff;
      border: none;
      border-radius: 6px;
      padding: 12px 0;
      font-size: 1.1rem;
      font-weight: bold;
      cursor: pointer;
      box-shadow: 0 2px 8px rgba(253,160,133,0.10);
      transition: background 0.2s, transform 0.1s;
      width: 100%;
    }
    button[type="submit"]:hover {
      background: linear-gradient(90deg, #fda085 0%, #f6d365 100%);
      transform: translateY(-2px) scale(1.03);
    }
    h2 {
      color: #333;
      margin-bottom: 8px;
      margin-top: 0;
      font-size: 1.2rem;
      text-align: center;
    }
    #entries {
      background: #fff;
      border-radius: 12px;
      box-shadow: 0 2px 12px rgba(0,0,0,0.07);
      padding: 14px 5vw;
      min-width: unset;
      max-width: 98vw;
      width: 100%;
      margin-bottom: 32px;
      min-height: 40px;
      box-sizing: border-box;
      font-size: 1rem;
    }
    @media (max-width: 500px) {
      html {
        font-size: 16px;
      }
      h1 {
        font-size: 1.3rem;
        margin-top: 18px;
      }
      form, #entries {
        padding: 10px 2vw;
        border-radius: 10px;
        box-shadow: 0 2px 8px rgba(0,0,0,0.08);
      }
      label {
        font-size: 0.98rem;
      }
      button[type="submit"] {
        font-size: 1rem;
        padding: 10px 0;
      }
    }
    /* Remove iOS input shadow and zoom on focus */
    input, select, textarea, button {
      -webkit-appearance: none;
      appearance: none;
    }
    input:focus, select:focus, textarea:focus {
      font-size: 16px;
    }
  </style>
</head>
<body>
  <h1>Summer Time Tracker</h1>
  <!-- Embedded Google Form: Replace the src URL with your actual Google Form embed link -->
  <div style="width:100%;max-width:600px;margin:0 auto 24px auto;">
    <iframe src="https://docs.google.com/forms/d/e/1FAIpQLSeEcB6by5qXylpLSOEUp8H3ZDN74ozopUgZBkEj4j69UcnjUA/viewform?embedded=true" width="100%" height="997" frameborder="0" marginheight="0" marginwidth="0" style="background:#fff;border-radius:18px;box-shadow:0 4px 24px rgba(0,0,0,0.10);">Loadingâ€¦</iframe>
  </div>
  <!-- Optionally, remove the old form below or comment it out -->
  <!--
  <form action="/submit" method="post">
    <label>Name:
      <select name="user" id="user" required>
        <option value="">--Select User--</option>
        <option value="Ollie">Ollie</option>
        <option value="Charlotte">Charlotte</option>
      </select>
    </label><br>

    <label>Date:
      <input type="date" name="date" id="date" required min="2025-06-15" max="2025-08-31">
    </label><br>

    <label>Hours Worked:
      <input type="number" step="0.1" name="hours" id="hours" required>
    </label><br>

    <label>Notes:<br>
      <textarea name="notes" id="notes" rows="4" cols="40"></textarea>
    </label><br>

    <button type="submit">Save Entry</button>
  </form>
  -->
  <h2>Previous Entries</h2>
  <div id="entries"></div>

  <script>
    const userSelect = document.getElementById('user');
    const dateInput = document.getElementById('date');

    function updateForm() {
      const user = userSelect.value;
      const date = dateInput.value;
      if (!user || !date) return;

      fetch(`/entry/${user}/${date}`)
        .then(res => res.json())
        .then(data => {
          document.getElementById('hours').value = data.hours || '';
          document.getElementById('notes').value = data.notes || '';
        });
    }

    userSelect.addEventListener('change', updateForm);
    dateInput.addEventListener('change', updateForm);

    // Set date input to today's date by default
    window.addEventListener('DOMContentLoaded', () => {
      const dateInput = document.getElementById('date');
      if (dateInput) {
        const today = new Date(2025, 5, 16); // Months are 0-indexed, so 5 = June
        const yyyy = today.getFullYear();
        const mm = String(today.getMonth() + 1).padStart(2, '0');
        const dd = String(today.getDate()).padStart(2, '0');
        dateInput.value = `${yyyy}-${mm}-${dd}`;
      }
    });
  </script>
</body>
</html>