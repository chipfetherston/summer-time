<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Summer Time Tracker</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@400;700&display=swap" rel="stylesheet">
  <style>
    body {
      font-family: 'Roboto', Arial, sans-serif;
      background: linear-gradient(120deg, #f6d365 0%, #fda085 100%);
      min-height: 100vh;
      margin: 0;
      padding: 0;
      display: flex;
      flex-direction: column;
      align-items: center;
    }
    h1 {
      margin-top: 40px;
      color: #333;
      font-size: 2.5rem;
      letter-spacing: 1px;
      text-shadow: 0 2px 8px rgba(0,0,0,0.08);
    }
    form {
      background: #fff;
      padding: 32px 28px 24px 28px;
      border-radius: 18px;
      box-shadow: 0 4px 24px rgba(0,0,0,0.10);
      margin-top: 32px;
      margin-bottom: 32px;
      min-width: 320px;
      max-width: 400px;
      width: 100%;
      display: flex;
      flex-direction: column;
      gap: 18px;
    }
    label {
      font-weight: 500;
      color: #444;
      margin-bottom: 6px;
      display: flex;
      flex-direction: column;
      gap: 4px;
    }
    input[type="date"],
    input[type="number"],
    select,
    textarea {
      padding: 8px 10px;
      border: 1px solid #ddd;
      border-radius: 6px;
      font-size: 1rem;
      background: #f9f9f9;
      transition: border 0.2s;
    }
    input[type="date"]:focus,
    input[type="number"]:focus,
    select:focus,
    textarea:focus {
      border: 1.5px solid #fda085;
      outline: none;
      background: #fffbe9;
    }
    button[type="submit"] {
      margin-top: 10px;
      background: linear-gradient(90deg, #f6d365 0%, #fda085 100%);
      color: #fff;
      border: none;
      border-radius: 6px;
      padding: 12px 0;
      font-size: 1.1rem;
      font-weight: bold;
      cursor: pointer;
      box-shadow: 0 2px 8px rgba(253,160,133,0.10);
      transition: background 0.2s, transform 0.1s;
    }
    button[type="submit"]:hover {
      background: linear-gradient(90deg, #fda085 0%, #f6d365 100%);
      transform: translateY(-2px) scale(1.03);
    }
    h2 {
      color: #333;
      margin-bottom: 10px;
      margin-top: 0;
    }
    #entries {
      background: #fff;
      border-radius: 12px;
      box-shadow: 0 2px 12px rgba(0,0,0,0.07);
      padding: 18px 20px;
      min-width: 320px;
      max-width: 400px;
      width: 100%;
      margin-bottom: 40px;
      min-height: 40px;
    }
    @media (max-width: 500px) {
      form, #entries {
        min-width: unset;
        max-width: 98vw;
        padding: 12px 6vw;
      }
      h1 {
        font-size: 2rem;
      }
    }
  </style>
</head>
<body>
  <h1>Summer Time Tracker</h1>
  <form action="/submit" method="post">
    <label>Name:
      <select name="user" id="user" required>
        <option value="">--Select User--</option>
        <option value="Ollie">Ollie</option>
        <option value="Charlotte">Charlotte</option>
      </select>
    </label><br>

    <label>Date:
      <input type="date" name="date" id="date" required min="2025-06-15" max="2025-08-31">
    </label><br>

    <label>Hours Worked:
      <input type="number" step="0.1" name="hours" id="hours" required>
    </label><br>

    <label>Notes:<br>
      <textarea name="notes" id="notes" rows="4" cols="40"></textarea>
    </label><br>

    <button type="submit">Save Entry</button>
  </form>

  <h2>Previous Entries</h2>
  <div id="entries"></div>

  <script>
    const userSelect = document.getElementById('user');
    const dateInput = document.getElementById('date');

    function updateForm() {
      const user = userSelect.value;
      const date = dateInput.value;
      if (!user || !date) return;

      fetch(`/entry/${user}/${date}`)
        .then(res => res.json())
        .then(data => {
          document.getElementById('hours').value = data.hours || '';
          document.getElementById('notes').value = data.notes || '';
        });
    }

    userSelect.addEventListener('change', updateForm);
    dateInput.addEventListener('change', updateForm);

    // Set date input to today's date by default
    window.addEventListener('DOMContentLoaded', () => {
      const dateInput = document.getElementById('date');
      if (dateInput) {
        const today = new Date(2025, 5, 16); // Months are 0-indexed, so 5 = June
        const yyyy = today.getFullYear();
        const mm = String(today.getMonth() + 1).padStart(2, '0');
        const dd = String(today.getDate()).padStart(2, '0');
        dateInput.value = `${yyyy}-${mm}-${dd}`;
      }
    });
  </script>
</body>
</html>